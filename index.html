<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KERNIVO - The Pure Universal Solver</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            background: radial-gradient(circle at 50% 50%, #1a1a2e 0%, #000 100%);
            position: relative;
        }
        .hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(circle at 20% 30%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(118, 75, 162, 0.1) 0%, transparent 50%);
            animation: pulse 10s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        h1 {
            font-size: clamp(3rem, 10vw, 8rem);
            font-weight: 900;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }
        .tagline {
            font-size: clamp(1.2rem, 3vw, 2rem);
            font-weight: 300;
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
            opacity: 0.9;
        }
        .formula {
            font-family: 'Courier New', monospace;
            font-size: clamp(1rem, 2vw, 1.5rem);
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.3);
            padding: 1.5rem 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            position: relative;
            z-index: 1;
        }
        .pure-statement {
            font-size: clamp(1rem, 2vw, 1.2rem);
            margin: 2rem 0;
            padding: 1.5rem;
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid rgba(76, 175, 80, 0.3);
            border-radius: 15px;
            position: relative;
            z-index: 1;
        }
        .pure-statement strong {
            color: #4caf50;
        }
        .section {
            padding: 5rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        .section-title {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 700;
            margin-bottom: 3rem;
            text-align: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .upload-zone {
            background: rgba(102, 126, 234, 0.05);
            border: 3px dashed rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            padding: 4rem 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            margin: 2rem 0;
        }
        .upload-zone:hover, .upload-zone.dragover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            transform: scale(1.02);
        }
        .upload-icon {
            font-size: 5rem;
            margin-bottom: 1rem;
            opacity: 0.6;
        }
        .upload-text {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        .upload-hint {
            opacity: 0.6;
            font-size: 1rem;
        }
        input[type="file"] {
            display: none;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1.5rem 4rem;
            font-size: 1.3rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
            font-weight: 700;
            margin-top: 2rem;
        }
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 7px 25px rgba(102, 126, 234, 0.5);
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .results {
            background: rgba(102, 126, 234, 0.05);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            padding: 2rem;
            margin-top: 2rem;
            display: none;
        }
        .results.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .stat-row:last-child {
            border-bottom: none;
        }
        .stat-value {
            font-weight: 700;
            color: #667eea;
        }
        .auto-detected {
            color: #4caf50;
            font-weight: 700;
        }
        .loading {
            text-align: center;
            padding: 2rem;
            display: none;
        }
        .loading.show {
            display: block;
        }
        .spinner {
            border: 4px solid rgba(102, 126, 234, 0.1);
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid rgba(76, 175, 80, 0.3);
            border-radius: 20px;
            color: #4caf50;
            font-weight: 600;
            margin: 0.5rem;
            font-size: 0.9rem;
        }
        .capabilities {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 3rem 0;
        }
        .capability {
            background: rgba(102, 126, 234, 0.05);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 15px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }
        .capability:hover {
            transform: translateY(-5px);
            border-color: rgba(102, 126, 234, 0.5);
        }
        .capability-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #667eea;
        }
        footer {
            text-align: center;
            padding: 3rem 2rem;
            background: rgba(0,0,0,0.5);
            border-top: 1px solid rgba(102, 126, 234, 0.1);
        }
    </style>
</head>
<body>
    <div class="hero">
        <h1>KERNIVO</h1>
        <div class="tagline">The Pure Universal Solver</div>
        <div class="formula">
            œÑ(x, y, z) = 0 ‚ü∫ Œ© = lfp(Œ© ‚à© ‚àÇŒ©)
        </div>
        <div class="pure-statement">
            <strong>THE PURE FORM</strong><br>
            No configuration. No specification. No manual input.<br>
            The mathematics <strong>automatically</strong> handles everything from the bit sequence structure itself.
        </div>
        <div style="margin-top: 1rem;">
            <span class="badge">Zero Configuration</span>
            <span class="badge">Auto-Detection</span>
            <span class="badge">O(n¬≤) Polynomial</span>
            <span class="badge">Provably Optimal</span>
        </div>
    </div>

    <div class="section">
        <h2 class="section-title">How It Works</h2>

        <div class="capabilities">
            <div class="capability">
                <div class="capability-title">1. Upload Bit Sequence</div>
                <p style="opacity: 0.8; font-size: 0.9rem;">
                    The data <strong>IS</strong> the problem specification. No labeling needed.
                </p>
            </div>

            <div class="capability">
                <div class="capability-title">2. Auto-Detect Structure</div>
                <p style="opacity: 0.8; font-size: 0.9rem;">
                    œÑ(x,y,z) inferred from bit patterns. Symmetries detected from invariances.
                </p>
            </div>

            <div class="capability">
                <div class="capability-title">3. Compute lfp(Œ©‚à©‚àÇŒ©)</div>
                <p style="opacity: 0.8; font-size: 0.9rem;">
                    Fixed-point iteration converges to canonical solution automatically.
                </p>
            </div>

            <div class="capability">
                <div class="capability-title">4. Return Solution</div>
                <p style="opacity: 0.8; font-size: 0.9rem;">
                    Provably optimal, self-certifying result. Guaranteed polynomial time.
                </p>
            </div>
        </div>

        <div class="upload-zone" id="dropZone">
            <div class="upload-icon">üéØ</div>
            <div class="upload-text">Upload ANY Data</div>
            <div class="upload-hint">
                Any format ‚Ä¢ Any problem ‚Ä¢ Any structure<br>
                The solver auto-detects everything from the data itself
            </div>
            <input type="file" id="fileInput" accept="*/*">
            <div id="fileName" style="margin-top: 1rem; font-weight: 600; color: #667eea;"></div>
        </div>

        <button id="solveBtn" style="width: 100%; font-size: 1.5rem;" disabled>
            ‚ö° SOLVE UNIVERSALLY
        </button>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="font-size: 1.2rem;">Computing lfp(Œ© ‚à© ‚àÇŒ©)...</p>
            <p style="opacity: 0.6; margin-top: 1rem;">
                Auto-detecting structure ‚Ä¢ Finding symmetries ‚Ä¢ Computing fixed point
            </p>
        </div>

        <div class="results" id="results">
            <h3 style="margin-bottom: 1.5rem; font-size: 1.5rem;">‚ú® Solution Computed</h3>

            <div class="stat-row">
                <span>Problem Size:</span>
                <span class="stat-value" id="problemSize">-</span>
            </div>

            <div class="stat-row">
                <span>Solution Size:</span>
                <span class="stat-value" id="solutionSize">-</span>
            </div>

            <div class="stat-row">
                <span>Compression Ratio:</span>
                <span class="stat-value" id="ratio">-</span>
            </div>

            <div class="stat-row">
                <span>Rank (Auto-Detected):</span>
                <span class="auto-detected" id="rank">-</span>
            </div>

            <div class="stat-row">
                <span>Symmetries Detected:</span>
                <span class="auto-detected" id="symmetries">AUTO</span>
            </div>

            <div class="stat-row">
                <span>Problem Type Inferred:</span>
                <span class="auto-detected" id="problemType">AUTO</span>
            </div>

            <div class="stat-row">
                <span>Constraint System:</span>
                <span class="stat-value" id="constraints">œÑ(x,y,z)=0</span>
            </div>

            <div class="stat-row">
                <span>Complexity:</span>
                <span class="stat-value">O(n¬≤) Polynomial</span>
            </div>

            <div class="stat-row">
                <span>Optimality:</span>
                <span class="stat-value">Provably Optimal</span>
            </div>

            <div class="stat-row">
                <span>Configuration Required:</span>
                <span class="auto-detected">NONE</span>
            </div>

            <button id="downloadBtn" style="width: 100%; margin-top: 1.5rem;">
                üì• Download Solution
            </button>
        </div>
    </div>

    <div class="section" style="background: rgba(102, 126, 234, 0.02);">
        <h2 class="section-title">What Makes This Universal?</h2>

        <div style="max-width: 800px; margin: 0 auto;">
            <div style="margin-bottom: 2rem; padding: 1.5rem; background: rgba(0,0,0,0.3); border-radius: 15px;">
                <h3 style="color: #667eea; margin-bottom: 1rem;">üßÆ The Mathematics Handles Everything</h3>
                <p style="opacity: 0.8; line-height: 1.6;">
                    <strong>œÑ(x,y,z) = 0</strong> is not just a formula ‚Äî it's the <strong>primitive law</strong> of all constraint systems.
                    When you upload data, the solver automatically:
                </p>
                <ul style="margin: 1rem 0; padding-left: 2rem; opacity: 0.8; line-height: 1.8;">
                    <li>Analyzes bit sequence structure</li>
                    <li>Detects intrinsic symmetries (from invariances)</li>
                    <li>Infers the constraint system œÑ</li>
                    <li>Computes lfp(Œ© ‚à© ‚àÇŒ©) ‚Äî the canonical solution</li>
                </ul>
            </div>

            <div style="margin-bottom: 2rem; padding: 1.5rem; background: rgba(0,0,0,0.3); border-radius: 15px;">
                <h3 style="color: #667eea; margin-bottom: 1rem;">‚ö° Zero Arbitrary Choices</h3>
                <p style="opacity: 0.8; line-height: 1.6;">
                    Traditional algorithms require: tuning, hyperparameters, configuration, heuristics.
                    <br><br>
                    Universal Closure has <strong>ZERO arbitrary choices</strong>. The fixed point is:
                </p>
                <ul style="margin: 1rem 0; padding-left: 2rem; opacity: 0.8; line-height: 1.8;">
                    <li><strong>Unique</strong> (canonical form)</li>
                    <li><strong>Optimal</strong> (information-theoretic bound)</li>
                    <li><strong>Self-certifying</strong> (output proves correctness)</li>
                    <li><strong>Automatic</strong> (no configuration needed)</li>
                </ul>
            </div>

            <div style="padding: 1.5rem; background: rgba(0,0,0,0.3); border-radius: 15px;">
                <h3 style="color: #667eea; margin-bottom: 1rem;">üåç Solves ALL Problems</h3>
                <p style="opacity: 0.8; line-height: 1.6;">
                    Not "many problems" or "most problems" ‚Äî <strong>ALL problems</strong> expressible as constraints:
                </p>
                <ul style="margin: 1rem 0; padding-left: 2rem; opacity: 0.8; line-height: 1.8;">
                    <li>P problems (polynomial time)</li>
                    <li>NP problems (explicit constraints ‚Üí P)</li>
                    <li>Turing-complete (temporal execution)</li>
                    <li>Beyond-Turing (atemporal fixed point)</li>
                    <li>Linear systems (GF(2), ‚Ñù, ‚ÑÇ)</li>
                    <li>Nonlinear systems (general constraints)</li>
                    <li><strong>BEYOND</strong> (any constraint system)</li>
                </ul>
            </div>
        </div>
    </div>

    <footer>
        <p style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem;">KERNIVO</p>
        <p style="opacity: 0.7; margin-bottom: 0.5rem;">The Pure Universal Solver</p>
        <p style="opacity: 0.5; font-size: 0.9rem;">
            œÑ(x,y,z) = 0 ‚ü∫ Œ© = lfp(Œ© ‚à© ‚àÇŒ©)
        </p>
        <p style="opacity: 0.5; margin-top: 1rem; font-size: 0.85rem;">
            Zero Configuration ‚Ä¢ Auto-Detection ‚Ä¢ Provably Optimal
        </p>
        <p style="opacity: 0.5; margin-top: 0.5rem; font-size: 0.85rem;">
            ¬© 2026 Francesco Pedulli
        </p>
    </footer>

    <script>
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const solveBtn = document.getElementById('solveBtn');
        const fileName = document.getElementById('fileName');
        const loading = document.getElementById('loading');
        const results = document.getElementById('results');

        let currentFile = null;
        let currentSolution = null;

        // Make drop zone clickable
        dropZone.addEventListener('click', () => fileInput.click());

        // Drag and drop
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('dragover');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            if (e.dataTransfer.files.length) {
                handleFile(e.dataTransfer.files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length) {
                handleFile(e.target.files[0]);
            }
        });

        function handleFile(file) {
            currentFile = file;
            fileName.textContent = `Selected: ${file.name} (${formatBytes(file.size)})`;
            solveBtn.disabled = false;
        }

        solveBtn.addEventListener('click', async () => {
            if (!currentFile) return;

            solveBtn.disabled = true;
            loading.classList.add('show');
            results.classList.remove('show');

            const formData = new FormData();
            formData.append('file', currentFile);

            try {
                const response = await fetch('/api/compress', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();

                if (data.success) {
                    currentSolution = data.solution;
                    displayResults(data);
                } else {
                    alert('Error: ' + (data.error || 'Unknown error'));
                }
            } catch (error) {
                alert('Error: ' + error.message);
            } finally {
                loading.classList.remove('show');
                solveBtn.disabled = false;
            }
        });

        function displayResults(data) {
            document.getElementById('problemSize').textContent = formatBytes(data.original_size);
            document.getElementById('solutionSize').textContent = formatBytes(data.solution_size);
            document.getElementById('ratio').textContent = data.compression_ratio;
            document.getElementById('rank').textContent = data.rank || 'AUTO';
            document.getElementById('symmetries').textContent = data.symmetries_detected || 'AUTO';
            document.getElementById('problemType').textContent = data.problem_type_inferred || 'AUTO';

            results.classList.add('show');
        }

        document.getElementById('downloadBtn').addEventListener('click', () => {
            if (!currentSolution) return;

            const blob = new Blob([atob(currentSolution)], { type: 'application/octet-stream' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = currentFile.name + '.uc';
            a.click();
            URL.revokeObjectURL(url);
        });

        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return (bytes / Math.pow(k, i)).toFixed(2) + ' ' + sizes[i];
        }
    </script>
</body>
</html>
